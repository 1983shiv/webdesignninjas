<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=index.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.ico rel=icon type=image/png> <link href=client/client-e29846ba.css rel=stylesheet><link href=client/Tags-72e47208.css rel=stylesheet><link href=client/[permalink]-45575316.css rel=stylesheet> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{title:"Create a blog with Sapper & Markdown (2 Part Series",summary:"TCreate a blog with Sapper & Markdown (2 Part Series",date:new Date(1609459200000),tags:["hello","world"],image:"seo2.png",filename:"Create a blog with markdown and sapper.md",permalink:"create-a-blog-with-sapper-markdown-2-part-series",html:"\u003Cp\u003Epermalink: \"Create-a-blog-with-Sapper-Markdown-Part-Series 1\"\u003C\u002Fp\u003E\n\u003Cdiv class=\"crayons-article__main\"\u003E\n\n\u003Cnav class=\"series-switcher crayons-card crayons-card--secondary\"\u003E\n\n\u003Cheader class=\"crayons-card__header\"\u003E### [Create a blog with Sapper & Markdown (2 Part Series)](\u002Fjoshnuss\u002Fseries\u002F9454)\u003C\u002Fheader\u003E\n\n\u003Cdiv class=\"series-switcher__list\"\u003E[\u003Cspan class=\"series-switcher__num\"\u003E1\u003C\u002Fspan\u003E \u003Cspan class=\"series-switcher__title\"\u003ECreate a blog with Sapper & Markdown\u003C\u002Fspan\u003E](\u002Fjoshnuss\u002Fcreate-a-blog-with-markdown-sapper-50ad \"Published Mar 28 '20\") [\u003Cspan class=\"series-switcher__num\"\u003E2\u003C\u002Fspan\u003E \u003Cspan class=\"series-switcher__title\"\u003ECreate a blog with Sapper & Markdown: Tagging\u003C\u002Fspan\u003E](\u002Fjoshnuss\u002Fcreate-a-blog-with-sapper-markdown-part-2-31m4 \"Published Oct 29 '20\")\u003C\u002Fdiv\u003E\n\n\u003C\u002Fnav\u003E\n\n\u003Cdiv class=\"crayons-article__body text-styles spec__body\" data-article-id=\"292941\" id=\"article-body\"\u003E[Sapper](https:\u002F\u002Fsapper.svelte.dev) is a toolkit for creating [Svelte](https:\u002F\u002Fsvelte.dev) apps. It comes with a bunch of conventions baked in to help you get your project up and running quickly. It can be deployed as a static site or as as a node.js server+SPA that does both server-side rendering and client-side rendering. NOTE: You can find a screencast of this at the end of the article. # [](#concept)Concept We're going to store blog posts as markdown `.md` files inside repo. That way we can use `git` as the workflow for editing posts. That means Pull Requests for reviewing posts, `git log` to view history of changes, and forking\u002Fbranching if we have multiple authors. Since our data comes from static files (no databases), we don't need a server side component, we can deploy this using Sapper's static site generator. # [](#setup)Setup Start by scaffolding the app with `degit`. You can use the official [`svelte\u002Fsapper-template`](https:\u002F\u002Fgithub.com\u002Fsvelte\u002Fsapper-template), but it includes a lot of demo code. I've going to use my fork [`joshnuss\u002Fsapper-template`](https:\u002F\u002Fgithub.com\u002Fjoshnuss\u002Fsapper-template) which is a blank slate without demo code.\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003Enpx degit joshnuss\u002Fsapper-template blog cd blog yarn install\n\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n# [](#posts-data)Posts data Each post will be saved in the `posts` directory and include `yaml` metadata the top of the file (aka front matter). Here's what a post `posts\u002Fexample.md` would look like:\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E-------- title: Everything you wanted to know summary: A short post about ... date: 2020-04-01 -------- - this - is - markdown\n\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n# [](#plugins)Plugins We could load these `.md` files using `fs.readFile()` at build time, but there is an even easier way, using `import` statements. To configure `rollup` for `.md` imports, we'll use the plugin [`@jackfranklin\u002Frollup-plugin-markdown`](https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002F@jackfranklin\u002Frollup-plugin-markdown). That makes it possible to:\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003Eimport post1 from 'posts\u002Fexample1.md' import post2 from 'posts\u002Fexample2.md' \u002F\u002F ...\n\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\nOf course importing each post one-by-one will get tedious fast. ðŸ˜… It would be easier to import a bunch of files at once based on a wildcard search pattern, like `posts\u002F*.md`. The plugin [`rollup-plugin-glob`](https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Frollup-plugin-glob) does exactly this. ðŸš€ Add the NPM packages:\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003Eyarn add -D @jackfranklin\u002Frollup-plugin-markdown rollup-plugin-glob\n\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\nThen, tell `rollup` to use these plugins. Update `rollup.config.js`:\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\u002F\u002F import plugins import markdown from '@jackfranklin\u002Frollup-plugin-markdown' import glob from 'rollup-plugin-glob' \u002F\u002F .... \u002F\u002F remember rollup is creating multiple builds \u002F\u002F make sure to add the new plugins to both the server *and* client builds export { client: { plugins: [ markdown(), glob(), ... ], ... }, server: { plugins: [ markdown(), glob(), ... ], ... } }\n\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n# [](#reading-posts)Reading Posts Now that we can import `.md`, let's centralize the logic for accessing posts inside `src\u002Fposts.js`:\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003Eimport all from '..\u002Fposts\u002F*.md' export const posts = all\n\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\nIf we `console.log(posts)`, the data for posts currently looks like this:\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E[ { metadata: {title: 'the title', summary: '...', date: '2020-01-02'}, html: ' # ... ', filename: 'example.md' } ]\n\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\nLet's reshape it a bit, just to make it easier for our UI to use. We're going to make these improvements: _ Put the `metadata` (`title`, `summary`, `date`) at the top level. _ Add a `permalink` field. It will be based on the `filename` \\* Sort the list of posts by `date` in descending order (newest posts first) Makes these changes to `src\u002Fposts.js`:\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003Eimport _ from 'lodash' import all from '..\u002Fposts\u002F*.md' export const posts = _.chain(all) \u002F\u002F begin a chain .map(transform) \u002F\u002F transform the shape of each post .orderBy('date', 'desc') \u002F\u002F sort by date descending .value() \u002F\u002F convert chain back to array \u002F\u002F function for reshaping each post function transform({filename, html, metadata}) { \u002F\u002F the permalink is the filename with the '.md' ending removed const permalink = filename.replace(\u002F\\.md$\u002F, '') \u002F\u002F convert date string into a proper `Date` const date = new Date(metadata.date) \u002F\u002F return the new shape return {...metadata, filename, html, permalink, date} } \u002F\u002F provide a way to find a post by permalink export function findPost(permalink) { \u002F\u002F use lodash to find by field name: return _.find(posts, {permalink}) }\n\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n# [](#index-page)Index page Now that we have our posts, we can move on to the UI. Open the `src\u002Froutes\u002Findex.svelte` and display an `\n\n\u003Carticle\u003E` tag for each post:\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\u003Cscript\u003E\u002F\u002F import the list of posts import {posts} from '..\u002Fposts'\u003C\u002Fscript\u003E # My Weblog {#each posts as post}\n\n\u003Carticle\u003E[ ## {post.title} {post.summary} ]({`\u002Fposts\u002F${post.permalink}`})\u003C\u002Farticle\u003E\n\n{\u002Feach}\n\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n# [](#blog-details-page)Blog details page The index page now shows summaries of each posts, to see the entire post add a page\u002Froute called `src\u002Froutes\u002Fposts\u002F[permalink].svelte`. Notice we're using square brackets around `[permalink]`? That tells sapper that the `permalink` is a dynamic parameter. Sapper will provide all parameters to our `preload()` function.\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003E\u003Cscript context=\"module\"\u003E\u002F\u002F import the logic for finding a post based on permalink import {findPost} from '..\u002F..\u002Fposts' \u002F\u002F sapper calls this to load our data export function preload(page) { \u002F\u002F find the post based on the permalink param const post = findPost(page.params.permalink) \u002F\u002F return a list of props return { post } }\u003C\u002Fscript\u003E \u003Cscript\u003E\u002F\u002F this prop is filled from the result of the `preload()` export let post\u003C\u002Fscript\u003E # {post.title} {@html post.html}\n\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n# [](#deploy)Deploy To deploy our site we can generate the static site with `yarn export`. You can also ðŸ›³ it with `zeit` while you're at it:\n\n\u003Cdiv class=\"highlight js-code-highlight\"\u003Eyarn export now\n\n\u003Cdiv class=\"highlight__panel js-actions-panel\"\u003E\n\n\u003Cdiv class=\"highlight__panel-action js-fullscreen-code-action\"\u003E\u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-on\"\u003E\u003Ctitle\u003EEnter fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E \u003Csvg xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\" width=\"20px\" height=\"20px\" viewBox=\"0 0 24 24\" class=\"highlight-action crayons-icon highlight-action--fullscreen-off\"\u003E\u003Ctitle\u003EExit fullscreen mode\u003C\u002Ftitle\u003E\u003C\u002Fsvg\u003E\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\n\u003C\u002Fdiv\u003E\n\nThat's it, all done! ðŸ’ƒ # [](#summary)Summary Building static sites with Sapper takes very little effort. There are many helpful rollup plugins that can convert static data into importable formats, that means we don't even have to write a parser for our data in many cases. Another good thing about this approach is its' versatility. The same concept will work for project pages, wikis, news sites, books, landing pages, etc. Any data you can put in a `git` repo, can be the driver of a sapper site. You can find example code here: [https:\u002F\u002Fgithub.com\u002Fjoshnuss\u002Fsample-blog](https:\u002F\u002Fgithub.com\u002Fjoshnuss\u002Fsample-blog) Happy coding! âœŒ PS. This is part of my upcoming course on svelte: [http:\u002F\u002Fsvelte.video](http:\u002F\u002Fsvelte.video) # [](#screencast)Screencast\n\n\u003Cdiv class=\" fluidvids\" style=\"padding-top: 56.1972%;\"\u003E\u003Ciframe width=\"710\" height=\"399\" src=\"https:\u002F\u002Fwww.youtube.com\u002Fembed\u002F9dSrsDdHyHg\" allowfullscreen=\"\" loading=\"lazy\" class=\" fluidvids-elem\"\u003E\u003C\u002Fiframe\u003E\u003C\u002Fdiv\u003E\n\n\u003C\u002Farticle\u003E\n\n\u003C\u002Fdiv\u003E\n\n\u003Cnav class=\"series-switcher crayons-card crayons-card--secondary\"\u003E\n\n\u003Cheader class=\"crayons-card__header\"\u003E### [Create a blog with Sapper & Markdown (2 Part Series)](\u002Fjoshnuss\u002Fseries\u002F9454)\u003C\u002Fheader\u003E\n\n\u003Cdiv class=\"series-switcher__list\"\u003E[\u003Cspan class=\"series-switcher__num\"\u003E1\u003C\u002Fspan\u003E \u003Cspan class=\"series-switcher__title\"\u003ECreate a blog with Sapper & Markdown\u003C\u002Fspan\u003E](\u002Fjoshnuss\u002Fcreate-a-blog-with-markdown-sapper-50ad \"Published Mar 28 '20\") [\u003Cspan class=\"series-switcher__num\"\u003E2\u003C\u002Fspan\u003E \u003Cspan class=\"series-switcher__title\"\u003ECreate a blog with Sapper & Markdown: Tagging\u003C\u002Fspan\u003E](\u002Fjoshnuss\u002Fcreate-a-blog-with-sapper-markdown-part-2-31m4 \"Published Oct 29 '20\")\u003C\u002Fdiv\u003E\n\n\u003C\u002Fnav\u003E\n\n\u003C\u002Fdiv\u003E"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.28bd83bc.js"}catch(e){main="/client/legacy/client.a19cde40.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@2.0.4.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> <title>Create a blog with Sapper & Markdown (2 Part Series</title> <link href=/client/client.28bd83bc.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/client-e29846ba.css rel=preload as=style><link href=/client/[permalink].d58e7bfa.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/_commonjsHelpers.1e235def.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/Tags.e90012b5.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/inject_styles.5607aec6.js rel=modulepreload as=script crossorigin=use-credentials><link href=/client/Tags-72e47208.css rel=preload as=style><link href=/client/[permalink]-45575316.css rel=preload as=style></head> <body> <div id=sapper> <header class="flex items-center flex-wrap bg-gray-50 lg:px-16 lg:py-2 px-6 py-2"><div class="flex flex-1 items-start justify-between"><a href=. class="flex flex-nowrap inline"><svg class="h-6 text-pink-500 w-6" viewBox="0 0 24 24" fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2 stroke=currentColor><path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z"></path><path d="M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path><path d="M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z"></path><path d="M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z"></path><path d="M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z"></path><path d="M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path><path d="M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z"></path><path d="M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z"></path></svg> <span class="font-extrabold font-heading1 font-4xl ml-1">Webdesign Ninjas</span></a></div> <label class="block lg:hidden pointer-cursor" for=menu-toggle><svg class="fill-current text-gray-900" viewBox="0 0 20 20" height=20 width=20 xmlns=http://www.w3.org/2000/svg><title>menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg></label> <input class=hidden id=menu-toggle type=hidden> <div class="hidden lg:flex lg:items-center lg:w-auto w-full" id=menu><nav><ul class="items-center justify-between lg:flex lg:pt-0 pt-4 text-base text-gray-700"><li><a href=. class="font-extrabold font-heading1 block border-b-2 border-transparent hover:border-indigo-400 lg:p-4 px-0 py-3">Home</a></li> <li><a href=about class="font-extrabold font-heading1 block border-b-2 border-transparent hover:border-indigo-400 lg:p-4 px-0 py-3">About</a></li> <li><a href=services class="font-extrabold font-heading1 block border-b-2 border-transparent hover:border-indigo-400 lg:p-4 px-0 py-3">Services</a></li> <li><a href=portfolio class="font-extrabold font-heading1 block border-b-2 border-transparent hover:border-indigo-400 lg:p-4 px-0 py-3">Portfolio</a></li> <li><a href=posts class="font-extrabold font-heading1 block border-b-2 border-transparent hover:border-indigo-400 lg:p-4 px-0 py-3" aria-current=page>Blog</a></li> <li><a href=contact class="font-extrabold font-heading1 block border-b-2 border-transparent hover:border-indigo-400 lg:p-4 px-0 py-3">Contact</a></ul></nav></div></header> <section class="body-font text-gray-600"><div class="py-24 container mx-auto"><div class="flex items-center flex-col flex-wrap mb-20 text-center w-full"><h1>Create a blog with Sapper & Markdown (2 Part Series</h1> <nav class=svelte-1x0wpo3><a href=/tag/hello>#hello</a><a href=/tag/world>#world</a> </nav> <div><p>permalink: "Create-a-blog-with-Sapper-Markdown-Part-Series 1"</p> <div class=crayons-article__main> <nav class="crayons-card crayons-card--secondary series-switcher"> <header class=crayons-card__header>### [Create a blog with Sapper & Markdown (2 Part Series)](/joshnuss/series/9454)</header> <div class=series-switcher__list>[<span class=series-switcher__num>1</span> <span class=series-switcher__title>Create a blog with Sapper & Markdown</span>](/joshnuss/create-a-blog-with-markdown-sapper-50ad "Published Mar 28 '20") [<span class=series-switcher__num>2</span> <span class=series-switcher__title>Create a blog with Sapper & Markdown: Tagging</span>](/joshnuss/create-a-blog-with-sapper-markdown-part-2-31m4 "Published Oct 29 '20")</div> </nav> <div class="crayons-article__body spec__body text-styles" id=article-body data-article-id=292941>[Sapper](https://sapper.svelte.dev) is a toolkit for creating [Svelte](https://svelte.dev) apps. It comes with a bunch of conventions baked in to help you get your project up and running quickly. It can be deployed as a static site or as as a node.js server+SPA that does both server-side rendering and client-side rendering. NOTE: You can find a screencast of this at the end of the article. # [](#concept)Concept We're going to store blog posts as markdown `.md` files inside repo. That way we can use `git` as the workflow for editing posts. That means Pull Requests for reviewing posts, `git log` to view history of changes, and forking/branching if we have multiple authors. Since our data comes from static files (no databases), we don't need a server side component, we can deploy this using Sapper's static site generator. # [](#setup)Setup Start by scaffolding the app with `degit`. You can use the official [`svelte/sapper-template`](https://github.com/svelte/sapper-template), but it includes a lot of demo code. I've going to use my fork [`joshnuss/sapper-template`](https://github.com/joshnuss/sapper-template) which is a blank slate without demo code. <div class="highlight js-code-highlight">npx degit joshnuss/sapper-template blog cd blog yarn install <div class="highlight__panel js-actions-panel"> <div class="highlight__panel-action js-fullscreen-code-action"><svg class="crayons-icon highlight-action highlight-action--fullscreen-on" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Enter fullscreen mode</title></svg> <svg class="crayons-icon highlight-action highlight-action--fullscreen-off" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Exit fullscreen mode</title></svg></div> </div> </div> # [](#posts-data)Posts data Each post will be saved in the `posts` directory and include `yaml` metadata the top of the file (aka front matter). Here's what a post `posts/example.md` would look like: <div class="highlight js-code-highlight">-------- title: Everything you wanted to know summary: A short post about ... date: 2020-04-01 -------- - this - is - markdown <div class="highlight__panel js-actions-panel"> <div class="highlight__panel-action js-fullscreen-code-action"><svg class="crayons-icon highlight-action highlight-action--fullscreen-on" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Enter fullscreen mode</title></svg> <svg class="crayons-icon highlight-action highlight-action--fullscreen-off" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Exit fullscreen mode</title></svg></div> </div> </div> # [](#plugins)Plugins We could load these `.md` files using `fs.readFile()` at build time, but there is an even easier way, using `import` statements. To configure `rollup` for `.md` imports, we'll use the plugin [`@jackfranklin/rollup-plugin-markdown`](https://www.npmjs.com/package/@jackfranklin/rollup-plugin-markdown). That makes it possible to: <div class="highlight js-code-highlight">import post1 from 'posts/example1.md' import post2 from 'posts/example2.md' // ... <div class="highlight__panel js-actions-panel"> <div class="highlight__panel-action js-fullscreen-code-action"><svg class="crayons-icon highlight-action highlight-action--fullscreen-on" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Enter fullscreen mode</title></svg> <svg class="crayons-icon highlight-action highlight-action--fullscreen-off" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Exit fullscreen mode</title></svg></div> </div> </div> Of course importing each post one-by-one will get tedious fast. ðŸ˜… It would be easier to import a bunch of files at once based on a wildcard search pattern, like `posts/*.md`. The plugin [`rollup-plugin-glob`](https://www.npmjs.com/package/rollup-plugin-glob) does exactly this. ðŸš€ Add the NPM packages: <div class="highlight js-code-highlight">yarn add -D @jackfranklin/rollup-plugin-markdown rollup-plugin-glob <div class="highlight__panel js-actions-panel"> <div class="highlight__panel-action js-fullscreen-code-action"><svg class="crayons-icon highlight-action highlight-action--fullscreen-on" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Enter fullscreen mode</title></svg> <svg class="crayons-icon highlight-action highlight-action--fullscreen-off" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Exit fullscreen mode</title></svg></div> </div> </div> Then, tell `rollup` to use these plugins. Update `rollup.config.js`: <div class="highlight js-code-highlight">// import plugins import markdown from '@jackfranklin/rollup-plugin-markdown' import glob from 'rollup-plugin-glob' // .... // remember rollup is creating multiple builds // make sure to add the new plugins to both the server *and* client builds export { client: { plugins: [ markdown(), glob(), ... ], ... }, server: { plugins: [ markdown(), glob(), ... ], ... } } <div class="highlight__panel js-actions-panel"> <div class="highlight__panel-action js-fullscreen-code-action"><svg class="crayons-icon highlight-action highlight-action--fullscreen-on" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Enter fullscreen mode</title></svg> <svg class="crayons-icon highlight-action highlight-action--fullscreen-off" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Exit fullscreen mode</title></svg></div> </div> </div> # [](#reading-posts)Reading Posts Now that we can import `.md`, let's centralize the logic for accessing posts inside `src/posts.js`: <div class="highlight js-code-highlight">import all from '../posts/*.md' export const posts = all <div class="highlight__panel js-actions-panel"> <div class="highlight__panel-action js-fullscreen-code-action"><svg class="crayons-icon highlight-action highlight-action--fullscreen-on" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Enter fullscreen mode</title></svg> <svg class="crayons-icon highlight-action highlight-action--fullscreen-off" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Exit fullscreen mode</title></svg></div> </div> </div> If we `console.log(posts)`, the data for posts currently looks like this: <div class="highlight js-code-highlight">[ { metadata: {title: 'the title', summary: '...', date: '2020-01-02'}, html: ' # ... ', filename: 'example.md' } ] <div class="highlight__panel js-actions-panel"> <div class="highlight__panel-action js-fullscreen-code-action"><svg class="crayons-icon highlight-action highlight-action--fullscreen-on" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Enter fullscreen mode</title></svg> <svg class="crayons-icon highlight-action highlight-action--fullscreen-off" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Exit fullscreen mode</title></svg></div> </div> </div> Let's reshape it a bit, just to make it easier for our UI to use. We're going to make these improvements: _ Put the `metadata` (`title`, `summary`, `date`) at the top level. _ Add a `permalink` field. It will be based on the `filename` \* Sort the list of posts by `date` in descending order (newest posts first) Makes these changes to `src/posts.js`: <div class="highlight js-code-highlight">import _ from 'lodash' import all from '../posts/*.md' export const posts = _.chain(all) // begin a chain .map(transform) // transform the shape of each post .orderBy('date', 'desc') // sort by date descending .value() // convert chain back to array // function for reshaping each post function transform({filename, html, metadata}) { // the permalink is the filename with the '.md' ending removed const permalink = filename.replace(/\.md$/, '') // convert date string into a proper `Date` const date = new Date(metadata.date) // return the new shape return {...metadata, filename, html, permalink, date} } // provide a way to find a post by permalink export function findPost(permalink) { // use lodash to find by field name: return _.find(posts, {permalink}) } <div class="highlight__panel js-actions-panel"> <div class="highlight__panel-action js-fullscreen-code-action"><svg class="crayons-icon highlight-action highlight-action--fullscreen-on" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Enter fullscreen mode</title></svg> <svg class="crayons-icon highlight-action highlight-action--fullscreen-off" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Exit fullscreen mode</title></svg></div> </div> </div> # [](#index-page)Index page Now that we have our posts, we can move on to the UI. Open the `src/routes/index.svelte` and display an ` <article>` tag for each post: <div class="highlight js-code-highlight"><script>// import the list of posts import {posts} from '../posts'</script> # My Weblog {#each posts as post} <article>[ ## {post.title} {post.summary} ]({`/posts/${post.permalink}`})</article> {/each} <div class="highlight__panel js-actions-panel"> <div class="highlight__panel-action js-fullscreen-code-action"><svg class="crayons-icon highlight-action highlight-action--fullscreen-on" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Enter fullscreen mode</title></svg> <svg class="crayons-icon highlight-action highlight-action--fullscreen-off" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Exit fullscreen mode</title></svg></div> </div> </div> # [](#blog-details-page)Blog details page The index page now shows summaries of each posts, to see the entire post add a page/route called `src/routes/posts/[permalink].svelte`. Notice we're using square brackets around `[permalink]`? That tells sapper that the `permalink` is a dynamic parameter. Sapper will provide all parameters to our `preload()` function. <div class="highlight js-code-highlight"><script context=module>// import the logic for finding a post based on permalink import {findPost} from '../../posts' // sapper calls this to load our data export function preload(page) { // find the post based on the permalink param const post = findPost(page.params.permalink) // return a list of props return { post } }</script> <script>// this prop is filled from the result of the `preload()` export let post</script> # {post.title} {@html post.html} <div class="highlight__panel js-actions-panel"> <div class="highlight__panel-action js-fullscreen-code-action"><svg class="crayons-icon highlight-action highlight-action--fullscreen-on" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Enter fullscreen mode</title></svg> <svg class="crayons-icon highlight-action highlight-action--fullscreen-off" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Exit fullscreen mode</title></svg></div> </div> </div> # [](#deploy)Deploy To deploy our site we can generate the static site with `yarn export`. You can also ðŸ›³ it with `zeit` while you're at it: <div class="highlight js-code-highlight">yarn export now <div class="highlight__panel js-actions-panel"> <div class="highlight__panel-action js-fullscreen-code-action"><svg class="crayons-icon highlight-action highlight-action--fullscreen-on" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Enter fullscreen mode</title></svg> <svg class="crayons-icon highlight-action highlight-action--fullscreen-off" viewBox="0 0 24 24" height=20px width=20px xmlns=http://www.w3.org/2000/svg><title>Exit fullscreen mode</title></svg></div> </div> </div> That's it, all done! ðŸ’ƒ # [](#summary)Summary Building static sites with Sapper takes very little effort. There are many helpful rollup plugins that can convert static data into importable formats, that means we don't even have to write a parser for our data in many cases. Another good thing about this approach is its' versatility. The same concept will work for project pages, wikis, news sites, books, landing pages, etc. Any data you can put in a `git` repo, can be the driver of a sapper site. You can find example code here: [https://github.com/joshnuss/sample-blog](https://github.com/joshnuss/sample-blog) Happy coding! âœŒ PS. This is part of my upcoming course on svelte: [http://svelte.video](http://svelte.video) # [](#screencast)Screencast <div class=fluidvids style=padding-top:56.1972%><iframe allowfullscreen class=fluidvids-elem height=399 loading=lazy src=https://www.youtube.com/embed/9dSrsDdHyHg width=710></iframe></div> </article> </div> <nav class="crayons-card crayons-card--secondary series-switcher"> <header class=crayons-card__header>### [Create a blog with Sapper & Markdown (2 Part Series)](/joshnuss/series/9454)</header> <div class=series-switcher__list>[<span class=series-switcher__num>1</span> <span class=series-switcher__title>Create a blog with Sapper & Markdown</span>](/joshnuss/create-a-blog-with-markdown-sapper-50ad "Published Mar 28 '20") [<span class=series-switcher__num>2</span> <span class=series-switcher__title>Create a blog with Sapper & Markdown: Tagging</span>](/joshnuss/create-a-blog-with-sapper-markdown-part-2-31m4 "Published Oct 29 '20")</div> </nav> </div></div></div></div></section> <footer class="body-font bg-gray-50 justify-center text-white"><div class="flex items-center flex-col container mx-auto px-5 py-8 sm:flex-row"><a href=. class="flex items-center font-medium justify-center md:justify-center text-gray-900 title-font"><div class="flex flex-1 items-start justify-between"><a href=. class="flex flex-nowrap inline"><svg class="h-6 text-pink-500 w-6" viewBox="0 0 24 24" fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2 stroke=currentColor><path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z"></path><path d="M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path><path d="M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z"></path><path d="M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z"></path><path d="M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z"></path><path d="M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path><path d="M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z"></path><path d="M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z"></path></svg> <span class="font-extrabold font-heading1 font-4xl ml-1">Webdesign Ninjas</span></a></div></a> <p class="text-gray-500 mt-4 sm:border-gray-200 sm:border-l-2 sm:ml-4 sm:mt-0 sm:pl-4 sm:py-2 text-sm">Â© 2021 </p> <div class="ml-4 mb-4"><span class="mt-4 inline-flex"><a href=https://www.facebook.com/webdesignninjas/ class=text-gray-500><svg class="h-5 w-5" viewBox="0 0 24 24" fill=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"></path></svg></a> <a href=https://twitter.com/const_shiv class="text-gray-500 ml-4"><svg class="h-5 w-5" viewBox="0 0 24 24" fill=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"></path></svg></a> <a href=https://instagram.com/ninjatech.dev class="text-gray-500 ml-4"><svg class="h-5 w-5" viewBox="0 0 24 24" fill=none stroke-linecap=round stroke-linejoin=round stroke-width=2 stroke=currentColor><rect height=20 rx=5 ry=5 width=20 x=2 y=2></rect><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37zm1.5-4.87h.01"></path></svg></a></span></div></div> </footer> </div> 